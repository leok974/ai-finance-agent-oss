# Database
# SQLite (default for quick start)
DATABASE_URL=sqlite:///./data/finance.db

# PostgreSQL (preferred in dev; matches docker-compose.yml)
# Start DB: docker compose up -d postgres
# Then use:
# DATABASE_URL=postgresql+psycopg://myuser:password@localhost:5432/finance

# OAuth providers (optional)
OAUTH_GITHUB_CLIENT_ID=
OAUTH_GITHUB_CLIENT_SECRET=
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=

# After login, redirect web app URL
OAUTH_POST_LOGIN_REDIRECT=http://localhost:5173/app

# Dev-only bypass (0 by default; set to 1 only for quick spikes)
DEV_ALLOW_NO_AUTH=0
DEV_ALLOW_NO_CSRF=0
DEV_ALLOW_NO_LLM=0

# Environment
# prod | dev | test (prefer setting APP_ENV; ENV is legacy)
APP_ENV=dev
# ENV=dev

# LLM (OpenAI-compatible)
# For Ollama local server, keep defaults; for OpenAI/vLLM, change appropriately
OPENAI_BASE_URL=http://localhost:11434/v1
OPENAI_API_KEY=ollama
# Default model (Ollama tag or OpenAI model id)
MODEL=gpt-oss:20b

# Cookies (dev)
COOKIE_SAMESITE=lax
COOKIE_SECURE=0

# Production switches
#COOKIE_SECURE=1
#COOKIE_SAMESITE=lax   # or "none" if truly cross-site under HTTPS
#COOKIE_DOMAIN=your.app.domain
#OAUTH_POST_LOGIN_REDIRECT=https://your.app.domain/app


# --- Encryption (Envelope AES-GCM) ---
# Master Key (KEK) in dev: either a 32-byte base64 string or hex; for production, use KMS/HSM.
# If not provided, the app will generate a random KEK on first boot and write a wrapped DEK only (not persisted KEK).
ENCRYPTION_ENABLED=1
ENCRYPTION_MASTER_KEY_BASE64=
# Active DEK label alias (kept flexible for future rotation)
ENCRYPTION_ACTIVE_LABEL=active

