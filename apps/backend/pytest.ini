[pytest]
addopts = -q -ra --import-mode=importlib --strict-markers
testpaths = tests
pythonpath = .

# Targeted warning filters (keep our own warnings visible)
filterwarnings =
    ignore:.*NameAttribute.* is deprecated.*:DeprecationWarning:cryptography\.
    ignore:.*is a deprecated alias.*:FutureWarning:pandas\.

markers =
    ml: ML suggestion flow tests
    agent_tools: agent tool endpoints
    budget: budget agent tools
    insights: insights agent tools
    charts: charts agent tools
    rules: rules agent tools
    rotation: key rotation flows
    crypto: encryption/crypto behavior
    needs_llm: requires live LLM connectivity
    needs_kms: requires configured KMS (cloud KMS)
    slow: long-running analytics tests
    order: execution ordering marker used in ML tests

# Optional (uncomment to fail on any warning from our package)
# filterwarnings =
#     error::Warning:app\.
