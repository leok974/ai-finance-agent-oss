[pytest]
markers =
    ml: ML suggestion flow tests
    agent_tools: agent tool endpoints
    budget: budget agent tools
    insights: insights agent tools
    charts: charts agent tools
    rules: rules agent tools
    rotation: key rotation flows
    crypto: encryption/crypto behavior
    needs_llm: requires live LLM connectivity
    needs_kms: requires configured KMS (cloud KMS)
    slow: long-running analytics tests
    order: execution ordering marker used in ML tests
    integration: cross-endpoint integration flow tests

# Suppress noisy third-party deprecations for lightweight root test lane.
filterwarnings =
    ignore:.*Please use `import python_multipart` instead.*:PendingDeprecationWarning:starlette\.
    ignore:.*Use 'content=<...>' to upload raw bytes/text content.*:DeprecationWarning:httpx\.