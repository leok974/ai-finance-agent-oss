FROM nginx:1.27-alpine

# Copy SPA build output into the standard web root
COPY ./apps/web/dist/ /usr/share/nginx/html/

# Set global nginx configuration (http context, logging)
COPY ./deploy/nginx-global.conf /etc/nginx/nginx.conf

# Replace default server config
COPY ./deploy/nginx.conf /etc/nginx/conf.d/default.conf

# Optional: minimal cleanup
RUN rm -f /etc/nginx/conf.d/default.conf.default 2>/dev/null || true
